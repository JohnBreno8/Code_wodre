<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>YodTuber</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap">
    <style>
        /* CSS existente */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Audiowide', sans-serif;
        }

        body {
            background-color: #000000;
            color: #f0f0f0;
            padding-bottom: 70px;
        }

        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: #05070eab;
            backdrop-filter: blur(10px);
            color: #ffffff;
            padding: 10px 20px;
            z-index: 1000;
            transition: top 0.3s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            border: 1px solid #434343;
        }

        h4 {
            font-family: 'Audiowide', cursive;
            font-size: 18px;
            border-right: 4px solid;
            width: 10ch;
            white-space: nowrap;
            overflow: hidden;
            animation: typing 1s steps(10), blinking 1s infinite step-end alternate;
        }

        @keyframes typing {
            from { width: 0; }
        }

        @keyframes blinking {
            50% { border-color: transparent; }
        }

        button[onclick="toggleSearch()"] {
            position: absolute;
            top: 0px;
            right: 60px;
            padding: 10px;
            border: none;
            cursor: pointer;
            border-radius: 13px;
            background: #27272700;
            color: white;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        #notifica {
            position: absolute;
            top: 7px;
            right: 115px;
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            width: 30px;
            height: 30px;
        }

        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background-color: #00000070;
            backdrop-filter: blur(19px);
            border-radius: 0;
            border: none;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
            border-top: 1px solid #464646;
        }

        .bottom-bar button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .bottom-bar svg {
            width: 26px;
            height: 26px;
            fill: #f0f0f0;
        }

        /* CSS para a seção de vídeos e pesquisa */
        #search-container {
            margin-top: 60px;
            padding: 20px;
            text-align: center;
            display: none; /* Esconder por padrão */
        }

        #search-input {
            padding: 10px;
            width: 80%;
            max-width: 500px;
            border-radius: 20px;
            border: 1px solid #464646;
            background: #1a1a1a;
            color: #f0f0f0;
            font-size: 16px;
        }

        #videos-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .video-card {
            background: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.2s;
        }

        .video-card:hover {
            transform: scale(1.05);
        }

        .video-card img {
            width: 100%;
            height: auto;
        }

        .video-card h3 {
            font-size: 14px;
            padding: 10px;
            margin: 0;
        }
    </style>
</head>
<body>
    <header class="header" id="header">
        <h4>Yod Tuber</h4>
        <button id="notifica" onclick="notifica()">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#ffffff" viewBox="0 0 24 24">
                <path d="M12 22c1.1 0 1.99-.9 1.99-2h-4A2 2 0 0012 22zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4a1.5 1.5 0 10-3 0v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
            </svg>
        </button>
        <button onclick="toggleSearch()">
            <svg width="24" viewBox="0 0 24 24" stroke="white" fill="none" stroke-width="2">
                <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
            </svg>
        </button>
    </header>

    <div id="search-container">
        <input type="text" id="search-input" placeholder="Pesquisar vídeos..." onkeypress="if(event.key === 'Enter') pesquisa()">
    </div>

    <div id="videos-container"></div>

    <div class="bottom-bar">
        <button onclick="navigate('home')" title="Início">
            <svg width="24" height="24" fill="#f0f0f0" viewBox="0 0 24 24"><path d="M3 10L12 3l9 7v11a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1z"/></svg>
        </button>
        <button onclick="navigate('shots')" title="Shots">
            <svg width="24" height="24" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M352.8 127.4L212.3 90.9c-27.1-7.5-53.1 13.7-53.1 42v56.2c0 6.5-3.6 12.4-9.3 15.5l-36.4 19.4c-25.4 13.6-25.4 50.1 0 63.7l36.4 19.4c5.7 3 9.3 9 9.3 15.5v56.2c0 28.3 26 49.5 53.1 42l140.5-36.5c24.5-6.4 39.4-31.6 33-56.1l-12.3-47.7c-1.8-7.1 1-14.5 7-18.7l23.3-16.4c21.3-15 21.3-45.5 0-60.5l-23.3-16.4c-6-4.2-8.8-11.6-7-18.7l12.3-47.7c6.4-24.5-8.5-49.7-33-56.1z" stroke="#f0f0f0" stroke-width="30" fill="none" />
                <polygon points="220,190 320,256 220,322" fill="#f0f0f0" />
            </svg>
        </button>
        <button onclick="navigate('inscricoes')" title="Inscrições">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f0f0f0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="14" rx="2" ry="2" fill="none"/>
                <path d="M10 9l5 3-5 3V9z" fill="#f0f0f0"/>
            </svg>
        </button>
        <button onclick="navigate('perfil')" title="Perfil">
            <svg width="24" height="24" fill="#f0f0f0" viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M4 20c0-4 4-6 8-6s8 2 8 6" fill="none" stroke="#f0f0f0" stroke-width="2"/></svg>
        </button>
    </div>

    <!-- Carregar APIs do Google -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        // Configurações da API
        const API_KEY = 'AIzaSyDWvYujjZBF6CKYaOR3_5kp4htROEy6bks'; // Sua chave da API
        const CLIENT_ID = '617601575320-n10sf0jp76glv1hf1ablt2t5povro6l7.apps.googleusercontent.com'; // Substitua pelo seu Client ID
        const DISCOVERY_DOCS = ['https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest'];
        const SCOPES = 'https://www.googleapis.com/auth/youtube.readonly';

        // Função para carregar a API do Google
        function initClient() {
            gapi.load('client:auth2', () => {
                gapi.client.init({
                    apiKey: API_KEY,
                    clientId: CLIENT_ID,
                    discoveryDocs: DISCOVERY_DOCS,
                    scope: SCOPES
                }).then(() => {
                    // Carregar vídeos populares ao iniciar
                    loadPopularVideos();
                    // Verificar estado de login (para funcionalidades opcionais)
                    gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
                    updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
                }).catch(error => {
                    console.error('Erro ao inicializar a API:', error);
                    alert('Erro ao conectar com a API do YouTube. Verifique a chave da API.');
                });
            });
        }

        // Atualizar interface com base no estado de login (apenas para inscrições)
        function updateSigninStatus(isSignedIn) {
            // Não altera o carregamento de vídeos populares, apenas atualiza para inscrições se necessário
        }

        // Fazer login
        function handleAuthClick() {
            gapi.auth2.getAuthInstance().signIn();
        }

        // Fazer logout
        function handleSignoutClick() {
            gapi.auth2.getAuthInstance().signOut();
            loadPopularVideos(); // Voltar a exibir vídeos populares após logout
        }

        // Carregar vídeos populares
        function loadPopularVideos() {
            gapi.client.youtube.videos.list({
                part: 'snippet,contentDetails',
                chart: 'mostPopular',
                maxResults: 12
            }).then(response => {
                displayVideos(response.result.items);
            }).catch(error => {
                console.error('Erro ao carregar vídeos:', error);
                alert('Erro ao carregar vídeos. Verifique sua conexão ou a chave da API.');
            });
        }

        // Carregar inscrições do usuário
        function loadSubscriptions() {
            gapi.client.youtube.subscriptions.list({
                part: 'snippet',
                mine: true,
                maxResults: 12
            }).then(response => {
                const channelIds = response.result.items.map(item => item.snippet.resourceId.channelId).join(',');
                loadChannelVideos(channelIds);
            }).catch(error => {
                console.error('Erro ao carregar inscrições:', error);
                alert('Erro ao carregar inscrições. Tente novamente.');
            });
        }

        // Carregar vídeos de canais inscritos
        function loadChannelVideos(channelIds) {
            gapi.client.youtube.search.list({
                part: 'snippet',
                channelId: channelIds,
                maxResults: 12,
                order: 'date'
            }).then(response => {
                displayVideos(response.result.items);
            }).catch(error => {
                console.error('Erro ao carregar vídeos dos canais:', error);
                alert('Erro ao carregar vídeos dos canais inscritos.');
            });
        }

        // Função para mostrar/esconder a barra de pesquisa
        function toggleSearch() {
            const searchContainer = document.getElementById('search-container');
            searchContainer.style.display = searchContainer.style.display === 'none' ? 'block' : 'none';
            if (searchContainer.style.display === 'block') {
                document.getElementById('search-input').focus();
            }
        }

        // Função de pesquisa
        function pesquisa() {
            const query = document.getElementById('search-input').value;
            if (!query) return;
            gapi.client.youtube.search.list({
                part: 'snippet',
                q: query,
                maxResults: 12,
                type: 'video'
            }).then(response => {
                displayVideos(response.result.items);
            }).catch(error => {
                console.error('Erro na pesquisa:', error);
                alert('Erro ao realizar a pesquisa. Tente novamente.');
            });
        }

        // Exibir vídeos na interface
        function displayVideos(videos) {
            const videosContainer = document.getElementById('videos-container');
            videosContainer.innerHTML = '';
            videos.forEach(video => {
                const videoId = video.id.videoId || video.id;
                const title = video.snippet.title;
                const thumbnail = video.snippet.thumbnails.medium.url;
                const videoCard = document.createElement('div');
                videoCard.className = 'video-card';
                videoCard.innerHTML = `
                    <img src="${thumbnail}" alt="${title}">
                    <h3>${title}</h3>
                `;
                videoCard.onclick = () => {
                    window.location.href = `https://www.youtube.com/watch?v=${videoId}`;
                };
                videosContainer.appendChild(videoCard);
            });
        }

        // Função de notificação (placeholder)
        function notifica() {
            alert('Função de notificações ainda não implementada!');
        }

        // Navegação
        function navigate(page) {
            if (page === 'home') {
                loadPopularVideos();
            } else if (page === 'inscricoes') {
                if (gapi.auth2.getAuthInstance().isSignedIn.get()) {
                    loadSubscriptions();
                } else {
                    alert('Faça login para ver suas inscrições!');
                }
            } else if (page === 'perfil') {
                if (gapi.auth2.getAuthInstance().isSignedIn.get()) {
                    handleSignoutClick();
                    alert('Logout realizado com sucesso!');
                } else {
                    handleAuthClick();
                }
            } else if (page === 'shots') {
                alert('Página de shots ainda não implementada!');
            }
        }

        // Inicializar a API
        initClient();
    </script>
</body>
                    </html>
